[<- На главную](../README.md)

## Вступление

Grafana нужна для:
- визуализации метрик из Thanos Query
- создания дашбордов с двухуровневой иерархией
- настройки алертов

## Иерархия дашбордов

```
L2 (High-level) — обзор системы, агрессивное округление, минимум деталей
L1 (Low-level)  — детальный анализ per exporter, один дашборд = один exporter
```

## Принципы разработки

Обязательные требования:
- Все запросы используют `[$__rate_interval]`
- Все запросы используют переменные `$instance` и `$job`
- Каждая панель имеет units, legend, description
- Dashboard ID = 0 или null для портируемости
- Datasource = `${DS_PROMETHEUS}` (переменная)

Визуализация:
- Толщина линии: 1
- Прозрачность: 10%
- Парные метрики (Read/Write, Tx/Rx) на одном графике

## Структура

Директории:
- `dashboards/` — JSON файлы дашбордов
- `alerts/` — правила алертов и Go шаблоны

## Алерты

Конфиги:
- `alerts/alert-rules.md` — определения правил
- `alerts/*.go` — Go шаблоны для форматирования сообщений
